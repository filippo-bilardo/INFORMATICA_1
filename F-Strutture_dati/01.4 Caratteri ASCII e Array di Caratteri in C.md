### **Sezione 4: Caratteri ASCII e Array di Caratteri in C**

In questa sezione esploreremo i caratteri ASCII e come lavorare con array di caratteri in C, un aspetto fondamentale della programmazione che permette di gestire testi e stringhe.

---

#### **1. Introduzione ai Caratteri ASCII**

ASCII (American Standard Code for Information Interchange) è un sistema di codifica che assegna valori numerici a caratteri, simboli e comandi di controllo. La tabella ASCII standard include 128 caratteri (0-127).

##### **Categorie principali di caratteri ASCII:**

- **Caratteri di controllo (0-31):** Non stampabili, usati per controllare dispositivi
- **Caratteri stampabili (32-126):**
  - Spazio (32)
  - Caratteri di punteggiatura e simboli (33-47, 58-64, 91-96, 123-126)
  - Cifre numeriche (48-57)
  - Lettere maiuscole (65-90)
  - Lettere minuscole (97-122)
- **Carattere di cancellazione (127)**

##### **Tabella ASCII di base (parziale):**

```
Dec  Hex  Char   | Dec  Hex  Char   | Dec  Hex  Char   | Dec  Hex  Char
-----------------|-----------------|-----------------|-----------------
  0  00   NUL    |  32  20  (spazio)|  64  40    @    |  96  60    `
  1  01   SOH    |  33  21    !    |  65  41    A    |  97  61    a
  2  02   STX    |  34  22    "    |  66  42    B    |  98  62    b
  ...
 10  0A   LF     |  42  2A    *    |  74  4A    J    | 106  6A    j
  ...
 13  0D   CR     |  45  2D    -    |  77  4D    M    | 109  6D    m
  ...
 31  1F   US     |  63  3F    ?    |  95  5F    _    | 127  7F   DEL
```

##### **Rappresentazione in C:**

In C, i caratteri sono rappresentati dal tipo `char`, che occupa 1 byte di memoria. Possono essere dichiarati usando:

```c
char c = 'A';        // Rappresentazione diretta
char c = 65;         // Valore ASCII numerico
char c = '\n';       // Carattere di escape per nuova linea
```

---

#### **2. Array di Caratteri in C**

Gli array di caratteri in C sono utilizzati per memorizzare sequenze di caratteri, incluse le stringhe di testo.

##### **Dichiarazione e Inizializzazione:**

```c
// Dichiarazione semplice
char caratteri[5];

// Inizializzazione con valori specifici
char vocali[5] = {'a', 'e', 'i', 'o', 'u'};

// Inizializzazione parziale (gli elementi rimanenti sono impostati a '\0')
char vocali[10] = {'a', 'e', 'i', 'o', 'u'};

// Inizializzazione senza specificare la dimensione (il compilatore la calcola)
char vocali[] = {'a', 'e', 'i', 'o', 'u'};
```

---

#### **3. Stringhe in C**

In C, le stringhe sono array di caratteri terminati dal carattere null ('\0', valore ASCII 0).

##### **Dichiarazione e Inizializzazione di Stringhe:**

```c
// Dichiarazione con inizializzazione esplicita
char nome[6] = {'M', 'a', 'r', 'i', 'o', '\0'};

// Dichiarazione con stringa letterale (il terminatore '\0' è aggiunto automaticamente)
char nome[6] = "Mario";

// Dichiarazione senza specificare la dimensione (il compilatore calcola la dimensione)
char nome[] = "Mario";  // Equivale a char nome[6]
```

##### **Esempio Completo:**

```c
#include <stdio.h>

int main() {
    // Dichiarazione e inizializzazione di una stringa
    char saluto[] = "Ciao, mondo!";
    
    // Stampa della stringa
    printf("%s\n", saluto);
    
    // Accesso ai singoli caratteri
    printf("Primo carattere: %c\n", saluto[0]);
    printf("Quinto carattere: %c\n", saluto[4]);
    
    // Modifica di un carattere
    saluto[0] = 'B';
    printf("Stringa modificata: %s\n", saluto);
    
    return 0;
}
```

##### **Output:**
```
Ciao, mondo!
Primo carattere: C
Quinto carattere: ,
Stringa modificata: Biao, mondo!
```

---

#### **4. Input e Output di Stringhe**

Ci sono diverse funzioni per gestire l'input e l'output di stringhe in C.

##### **Output di Stringhe:**

```c
#include <stdio.h>

int main() {
    char nome[] = "Mario Rossi";
    
    // Utilizzo di printf
    printf("Nome: %s\n", nome);
    
    // Utilizzo di puts (aggiunge automaticamente un newline)
    puts(nome);
    
    return 0;
}
```

##### **Input di Stringhe:**

```c
#include <stdio.h>

int main() {
    char nome[50];
    
    // Utilizzo di scanf (si ferma al primo spazio)
    printf("Inserisci il tuo nome: ");
    scanf("%s", nome);  // Nota: non serve & per gli array
    printf("Hai inserito: %s\n", nome);
    
    // Pulizia del buffer di input
    while (getchar() != '\n');
    
    // Utilizzo di fgets (legge anche gli spazi)
    printf("Inserisci il tuo nome completo: ");
    fgets(nome, 50, stdin);
    printf("Hai inserito: %s", nome);  // fgets include già il newline
    
    return 0;
}
```

---

#### **5. Funzioni per la Manipolazione di Stringhe**

La libreria standard `string.h` fornisce numerose funzioni per manipolare le stringhe.

##### **Funzioni Comuni:**

```c
#include <stdio.h>
#include <string.h>

int main() {
    char str1[50] = "Hello";
    char str2[50] = "World";
    char str3[100];
    
    // Lunghezza di una stringa
    printf("Lunghezza di str1: %lu\n", strlen(str1));
    
    // Copia di stringhe
    strcpy(str3, str1);  // Copia str1 in str3
    printf("str3 dopo strcpy: %s\n", str3);
    
    // Concatenazione di stringhe
    strcat(str3, " ");   // Aggiunge uno spazio a str3
    strcat(str3, str2);   // Aggiunge str2 a str3
    printf("str3 dopo strcat: %s\n", str3);
    
    // Confronto di stringhe
    if (strcmp(str1, str2) == 0) {
        printf("str1 e str2 sono uguali\n");
    } else {
        printf("str1 e str2 sono diverse\n");
    }
    
    return 0;
}
```

##### **Output:**
```
Lunghezza di str1: 5
str3 dopo strcpy: Hello
str3 dopo strcat: Hello World
str1 e str2 sono diverse
```

---

#### **6. Array di Caratteri Multidimensionali**

Gli array multidimensionali di caratteri possono essere utilizzati per memorizzare più stringhe.

##### **Esempio:**

```c
#include <stdio.h>

int main() {
    // Array di 3 stringhe, ciascuna con una lunghezza massima di 20 caratteri
    char nomi[3][20] = {
        "Mario Rossi",
        "Luigi Verdi",
        "Anna Bianchi"
    };
    
    // Stampa di tutte le stringhe
    printf("Elenco nomi:\n");
    for (int i = 0; i < 3; i++) {
        printf("%d. %s\n", i+1, nomi[i]);
    }
    
    // Modifica di una stringa
    strcpy(nomi[1], "Paolo Verdi");
    printf("\nDopo la modifica:\n");
    printf("2. %s\n", nomi[1]);
    
    return 0;
}
```

##### **Output:**
```
Elenco nomi:
1. Mario Rossi
2. Luigi Verdi
3. Anna Bianchi

Dopo la modifica:
2. Paolo Verdi
```

---

#### **7. Conversione tra Caratteri e Valori ASCII**

In C, la conversione tra caratteri e i loro valori ASCII è semplice grazie al sistema di tipi.

##### **Esempio:**

```c
#include <stdio.h>

int main() {
    // Conversione da carattere a valore ASCII
    char c = 'A';
    int ascii_value = c;  // Conversione implicita
    printf("Il valore ASCII di '%c' è %d\n", c, ascii_value);
    
    // Conversione da valore ASCII a carattere
    int value = 66;  // ASCII per 'B'
    char character = (char)value;  // Cast esplicito
    printf("Il carattere con valore ASCII %d è '%c'\n", value, character);
    
    // Stampa di una parte della tabella ASCII
    printf("\nParte della tabella ASCII (65-90, lettere maiuscole):\n");
    for (int i = 65; i <= 90; i++) {
        printf("%3d: %c  ", i, (char)i);
        if ((i - 64) % 5 == 0) printf("\n");  // Nuova riga ogni 5 caratteri
    }
    
    return 0;
}
```

##### **Output:**
```
Il valore ASCII di 'A' è 65
Il carattere con valore ASCII 66 è 'B'

Parte della tabella ASCII (65-90, lettere maiuscole):
 65: A   66: B   67: C   68: D   69: E  
 70: F   71: G   72: H   73: I   74: J  
 75: K   76: L   77: M   78: N   79: O  
 80: P   81: Q   82: R   83: S   84: T  
 85: U   86: V   87: W   88: X   89: Y   90: Z  
```

---

#### **8. Considerazioni sulla Sicurezza**

Quando si lavora con array di caratteri in C, è importante considerare alcuni aspetti di sicurezza:

- **Buffer Overflow:** Assicurarsi che gli array siano abbastanza grandi per contenere i dati, incluso il terminatore null.
- **Funzioni Sicure:** Utilizzare funzioni come `strncpy()` invece di `strcpy()` per limitare il numero di caratteri copiati.
- **Validazione dell'Input:** Controllare sempre l'input dell'utente prima di memorizzarlo in un array.

##### **Esempio di Utilizzo Sicuro:**

```c
#include <stdio.h>
#include <string.h>

int main() {
    char nome[10];  // Può contenere al massimo 9 caratteri + '\0'
    
    printf("Inserisci il tuo nome (max 9 caratteri): ");
    
    // Utilizzo di fgets per limitare l'input
    fgets(nome, sizeof(nome), stdin);
    
    // Rimuovi il newline se presente
    size_t len = strlen(nome);
    if (len > 0 && nome[len-1] == '\n') {
        nome[len-1] = '\0';
    }
    
    printf("Ciao, %s!\n", nome);
    
    return 0;
}
```

---

Questa guida fornisce una panoramica completa sui caratteri ASCII e sugli array di caratteri in C, coprendo dalla teoria di base fino agli aspetti pratici della manipolazione delle stringhe. La comprensione di questi concetti è fondamentale per qualsiasi programmatore C, poiché la gestione del testo è una parte essenziale di molte applicazioni.